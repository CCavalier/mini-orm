/**
 * 
 */
package persistence.test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import java.math.BigDecimal;
import java.util.List;

import org.junit.Before;
import org.junit.Test;

import persistence.PersistenceConfiguration;
import persistence.PersistenceException;
import persistence.PersistenceSessionFactory;
import persistence.PersistenceSession;

/**
 * @author dga
 * 
 */
public class TestSession {
//	private PersistenceConfiguration configuration;
//	private PersistenceSessionFactory factory;
//
//	@Before
//	public void setUp() throws PersistenceException {
//		configuration = new PersistenceConfiguration(
//				"persistence/test/persistence-config-test.xml");
//		factory = new PersistenceSessionFactory(configuration);
//	}
//
//	@Test
//	public void testDropTable() throws Exception {
//		PersistenceSession s = factory.openSession();
//		try {
//			s.dropTable(Book.class);
//		} catch (Exception e) {
//
//		}
//		try {
//			s.dropTable(Category.class);
//		} catch (Exception e) {
//		}
//		s.close();
//	}
//
//	@Test
//	public void testCreateTable() throws Exception {
//		PersistenceSession s = factory.openSession();
//		s.createTable(Book.class);
//		s.createTable(Category.class);
//		s.close();
//	}
//
//	@Test
//	public void testSession() throws Exception {
//		PersistenceSession s = factory.openSession();
//		Book b = new Book();
//		b.setTitle("Java");
//		b.setPrice(new BigDecimal("1000.35"));
//		Category c = new Category();
//		c.setTitle("Informatique");
//		s.save(c);
//		assertNotNull(c.getId());
//		b.setCategory(c);
//		s.save(b);
//		assertNotNull(b.getId());
//
//		Book bb = (Book) s.get(Book.class, b.getId());
//
//		assertEquals(b.getId(), bb.getId());
//		assertEquals(b.getTitle(), bb.getTitle());
//		assertEquals(b.getPrice(), bb.getPrice());
//		s.close();
//	}
//
//	@Test
//	public void testQuery() throws Exception {
//		PersistenceSession s = factory.openSession();
//		List<Book> l = (List<Book>) s.query(Book.class, "select * from Book");
//		assertTrue(l.size() == 1);
//		System.out.println(l.get(0).getTitle());
//		s.close();
//	}
//
//	@Test
//	public void testUpdate() throws Exception {
//		PersistenceSession s = factory.openSession();
//		List<Book> l = (List<Book>) s.query(Book.class, "select * from Book");
//		Book b = l.get(0);
//		b.setTitle("Un autre titre");
//		s.update(b);
//		Book bb = (Book) s.get(Book.class, b.getId());
//		assertEquals(b.getId(), bb.getId());
//		assertEquals(b.getTitle(), bb.getTitle());
//		assertEquals(b.getPrice(), bb.getPrice());
//		s.close();
//	}

}
